import{o as x,G as J,bp as z,w as W,bq as H,r as R,br as I,g as q,bs as K,bt as B,s as Q,c as V,bu as h,$ as U}from"./index-CkHtFk-G.js";function X(e){return K()?(B(e),!0):!1}const Y=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Z=Object.prototype.toString,ee=e=>Z.call(e)==="[object Object]",te=()=>{};function ne(e,n){function t(...i){return new Promise((l,f)=>{Promise.resolve(e(()=>n.apply(this,i),{fn:n,thisArg:this,args:i})).then(l).catch(f)})}return t}const L=e=>e();function re(e=L,n={}){const{initialState:t="active"}=n,i=ie(t==="active");function l(){i.value=!1}function f(){i.value=!0}const y=(...o)=>{i.value&&e(...o)};return{isActive:z(i),pause:l,resume:f,eventFilter:y}}function oe(e){return q()}function N(e){return Array.isArray(e)?e:[e]}function ie(...e){if(e.length!==1)return H(...e);const n=e[0];return typeof n=="function"?z(I(()=>({get:n,set:te}))):R(n)}function ae(e,n,t={}){const{eventFilter:i=L,...l}=t;return W(e,ne(i,n),l)}function ue(e,n,t={}){const{eventFilter:i,initialState:l="active",...f}=t,{eventFilter:y,pause:o,resume:a,isActive:u}=re(i,{initialState:l});return{stop:ae(e,n,{...f,eventFilter:y}),pause:o,resume:a,isActive:u}}function le(e,n=!0,t){oe()?x(e,t):n?e():J(e)}function se(e,n,t){return W(e,n,{...t,immediate:!0})}const C=Y?window:void 0;function ce(e){var n;const t=h(e);return(n=t?.$el)!=null?n:t}function D(...e){const n=[],t=()=>{n.forEach(o=>o()),n.length=0},i=(o,a,u,p)=>(o.addEventListener(a,u,p),()=>o.removeEventListener(a,u,p)),l=V(()=>{const o=N(h(e[0])).filter(a=>a!=null);return o.every(a=>typeof a!="string")?o:void 0}),f=se(()=>{var o,a;return[(a=(o=l.value)==null?void 0:o.map(u=>ce(u)))!=null?a:[C].filter(u=>u!=null),N(h(l.value?e[1]:e[0])),N(U(l.value?e[2]:e[1])),h(l.value?e[3]:e[2])]},([o,a,u,p])=>{if(t(),!o?.length||!a?.length||!u?.length)return;const v=ee(p)?{...p}:p;n.push(...o.flatMap(F=>a.flatMap(S=>u.map(O=>i(F,S,O,v)))))},{flush:"post"}),y=()=>{f(),t()};return X(t),y}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E="__vueuse_ssr_handlers__",fe=pe();function pe(){return E in A||(A[E]=A[E]||{}),A[E]}function de(e,n){return fe[e]||n}function ye(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ve={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},M="vueuse-storage";function ge(e,n,t,i={}){var l;const{flush:f="pre",deep:y=!0,listenToStorageChanges:o=!0,writeDefaults:a=!0,mergeDefaults:u=!1,shallow:p,window:v=C,eventFilter:F,onError:S=r=>{console.error(r)},initOnMounted:O}=i,m=(p?Q:R)(typeof n=="function"?n():n),d=V(()=>h(e));if(!t)try{t=de("getDefaultStorage",()=>{var r;return(r=C)==null?void 0:r.localStorage})()}catch(r){S(r)}if(!t)return m;const g=h(n),j=ye(g),b=(l=i.serializer)!=null?l:ve[j],{pause:P,resume:T}=ue(m,()=>_(m.value),{flush:f,deep:y,eventFilter:F});W(d,()=>w(),{flush:f}),v&&o&&le(()=>{t instanceof Storage?D(v,"storage",w,{passive:!0}):D(v,M,$),O&&w()}),O||w();function k(r,s){if(v){const c={key:d.value,oldValue:r,newValue:s,storageArea:t};v.dispatchEvent(t instanceof Storage?new StorageEvent("storage",c):new CustomEvent(M,{detail:c}))}}function _(r){try{const s=t.getItem(d.value);if(r==null)k(s,null),t.removeItem(d.value);else{const c=b.write(r);s!==c&&(t.setItem(d.value,c),k(s,c))}}catch(s){S(s)}}function G(r){const s=r?r.newValue:t.getItem(d.value);if(s==null)return a&&g!=null&&t.setItem(d.value,b.write(g)),g;if(!r&&u){const c=b.read(s);return typeof u=="function"?u(c,g):j==="object"&&!Array.isArray(c)?{...g,...c}:c}else return typeof s!="string"?s:b.read(s)}function w(r){if(!(r&&r.storageArea!==t)){if(r&&r.key==null){m.value=g;return}if(!(r&&r.key!==d.value)){P();try{r?.newValue!==b.write(m.value)&&(m.value=G(r))}catch(s){S(s)}finally{r?J(T):T()}}}}function $(r){w(r.detail)}return m}export{ge as u};
