import{d as B,ad as I,k as _,l as p,Y as l,ae as g,f as a,F as G,au as H,az as A,a7 as E,a6 as U,a5 as V,Q,a3 as k,$ as S,i as X,aC as J,r as f,c as y,a4 as z,m as K,y as W,g as ee,A as te,w as j,G as ae,h as D,p as M,I as le,X as oe,al as re,a2 as ne,o as se,aD as ue,aE as ie,aF as de,_ as O,Z as me}from"./index-CkHtFk-G.js";import{Q as N,a as b}from"./QItem-D4n1PNfn.js";import{Q as T}from"./QItemLabel-Cq4i02Nq.js";import{Q as ce}from"./QList-BXDflqvC.js";import{u as pe}from"./useBoard-Dx1jBox_.js";import{Q as ve,a as fe}from"./QTabs-DwNL02w3.js";import{T as _e}from"./TouchPan-CD4z-JvM.js";import{Q as be,a as ye}from"./QSelect-TTgsxVfg.js";import{a as Ve}from"./printengine-store-eb6PD6y-.js";import"./app-store-BeK8FA_5.js";import"./index-BF-LnGoJ.js";import"./QResizeObserver-BNKf2L6F.js";import"./selection-DT_R9Vgf.js";import"./format-BvkBI9bc.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-BAU4s81U.js";const ge={key:0},xe=B({__name:"BoardRegexList",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const o=I(e,"modelValue"),i=()=>{o.value.push({name:"New",icon:"sym_o_search",regex:/^alive:\s*(\d+)/m,description:"New item",results:null})},d=u=>{o.value.splice(u,1)},n=(u,s)=>{if(o.value[s]!==void 0&&u!==void 0)try{const t=u.replace(/.*\/([gimy]*)$/,"$1"),r=u.replace(new RegExp("^/(.*?)/"+t+"$"),"$1");o.value[s].regex=new RegExp(r,t)}catch{console.log(`Regex ${u} is not valid`)}},m=u=>u[1]?.split(" ").filter(s=>s!=="");return(u,s)=>(p(),_(ce,null,{default:l(()=>[(p(!0),g(G,null,H(o.value,(t,r)=>(p(),_(N,{key:r,dense:"",class:"q-pa-none"},{default:l(()=>[a(b,{avatar:""},{default:l(()=>[a(A,{name:t.icon},null,8,["name"])]),_:2},1024),a(b,null,{default:l(()=>[a(T,null,{default:l(()=>[a(E,{modelValue:t.name,"onUpdate:modelValue":c=>t.name=c,dense:"",label:"Name"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(b,null,{default:l(()=>[a(E,{label:"Regex","model-value":t.regex.toString(),"onUpdate:modelValue":c=>n(c?.toString(),r),type:"text",dense:""},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),a(b,null,{default:l(()=>[t.results!==null?(p(),g("div",ge,V(m(t.results)),1)):U("",!0)]),_:2},1024),a(b,{side:""},{default:l(()=>[a(Q,{icon:"sym_o_delete",onClick:c=>d(r),dense:"",round:"",flat:"","text-color":"negative"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),a(N,null,{default:l(()=>[a(b,null,{default:l(()=>[a(Q,{label:"Add parser",onClick:i,push:"",rounded:"",icon:"sym_o_add"})]),_:1})]),_:1})]),_:1}))}}),he={style:{"font-size":"0.5em"}},Se=B({__name:"BoardRaw",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const o=I(e,"modelValue"),{page:i,regexList:d}=pe(o);return(n,m)=>{const u=xe;return p(),g("div",null,[a(u,{modelValue:S(d),"onUpdate:modelValue":m[0]||(m[0]=s=>X(d)?d.value=s:null)},null,8,["modelValue"]),k("pre",he,V(S(i)),1)])}}}),Be={class:"col text-right"},Ce=B({__name:"BoardTab",props:{modelValue:{required:!0},modelModifiers:{}},emits:J(["split"],["update:modelValue"]),setup(e,{emit:o}){const i=I(e,"modelValue"),d=o,n=f(0),m=y(()=>{if(n.value!==void 0)return i.value[n.value]});return(u,s)=>{const t=Se;return p(),g("div",null,[a(ve,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=r=>n.value=r),dense:"",align:"left",class:"bg-primary"},{default:l(()=>[(p(!0),g(G,null,H(i.value.filter(r=>!r.displayed),(r,c)=>(p(),_(fe,{name:c,key:c},{default:l(()=>[z(V(r.DeviceTypeStr)+" "+V(r.DeviceNo+1),1)]),_:2},1032,["name"]))),128)),k("div",Be,[a(Q,{icon:"sym_o_splitscreen_vertical_add",flat:"",dense:"",onClick:s[0]||(s[0]=r=>d("split"))})])]),_:1},8,["modelValue"]),m.value&&n.value!==void 0?(p(),_(t,{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=r=>m.value=r),key:n.value},null,8,["modelValue"])):U("",!0)])}}}),$e=K({name:"QSplitter",props:{...W,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:o,emit:i}){const{proxy:{$q:d}}=ee(),n=te(e,d),m=f(null),u={before:f(null),after:f(null)},s=y(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(n.value===!0?" q-splitter--dark":"")),t=y(()=>e.horizontal===!0?"height":"width"),r=y(()=>e.reverse!==!0?"before":"after"),c=y(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function C(v){return(e.unit==="%"?v:Math.round(v))+e.unit}const $=y(()=>({[r.value]:{[t.value]:C(e.modelValue)}}));let q,R,L,P,x;function Y(v){if(v.isFirst===!0){const w=m.value.getBoundingClientRect()[t.value];q=e.horizontal===!0?"up":"left",R=e.unit==="%"?100:w,L=Math.min(R,c.value[1],Math.max(c.value[0],e.modelValue)),P=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:d.lang.rtl===!0?-1:1)*(e.unit==="%"?w===0?0:100/w:1),m.value.classList.add("q-splitter--active");return}if(v.isFinal===!0){x!==e.modelValue&&i("update:modelValue",x),m.value.classList.remove("q-splitter--active");return}const h=L+P*(v.direction===q?-1:1)*v.distance[e.horizontal===!0?"y":"x"];x=Math.min(R,c.value[1],Math.max(c.value[0],h)),u[r.value].value.style[t.value]=C(x),e.emitImmediately===!0&&e.modelValue!==x&&i("update:modelValue",x)}const Z=y(()=>[[_e,Y,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function F(v,h){v<h[0]?i("update:modelValue",h[0]):v>h[1]&&i("update:modelValue",h[1])}return j(()=>e.modelValue,v=>{F(v,c.value)}),j(()=>e.limits,()=>{ae(()=>{F(e.modelValue,c.value)})}),()=>{const v=[D("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:$.value.before},M(o.before)),D("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[le("div",{class:"q-splitter__separator-area absolute-full"},M(o.separator),"sep",e.disable!==!0,()=>Z.value)]),D("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:$.value.after},M(o.after))];return D("div",{class:s.value,ref:m},oe(o.default,v))}}}),ke=B({__name:"BoardSplitter",props:{boards:{}},setup(e){const o=e,{boards:i}=re(o),d=f(!1),n=f(100),m=()=>{d.value=!0,n.value=50};return(u,s)=>{const t=ne("BoardSplitter",!0),r=Ce;return p(),g("div",null,[d.value?(p(),_(S($e),{key:0,modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=c=>n.value=c)},{before:l(()=>[a(t,{boards:S(i)},null,8,["boards"])]),after:l(()=>[a(t,{boards:S(i)},null,8,["boards"])]),_:1},8,["modelValue"])):(p(),_(r,{key:1,modelValue:S(i),"onUpdate:modelValue":s[1]||(s[1]=c=>X(i)?i.value=c:null),onSplit:m},null,8,["modelValue"]))])}}}),qe=B({__name:"BoardsSelect",props:{boards:{},boardsModifiers:{}},emits:["update:boards"],setup(e){const o=I(e,"boards"),i=f([]),d=f(!1),n=async()=>{d.value=!0;try{const{GetData:u}=await Ve();let t=(await u({ComponentName:"MvtAdapter",VarNames:["Boards"]},void 0,{paramsSerializer:{indexes:null}})).data[0].Items;t=t.filter(r=>r.DeviceTypeStr!=="Main"&&r.IpAddr!==""),t=t.sort((r,c)=>{const C=$=>{if($===void 0)return 0;const q=$.split(".").at(-1);return parseInt(q||"0")};return C(r.IpAddr)-C(c.IpAddr)}),i.value=t}catch(u){console.log(u)}d.value=!1},m={Stepper:"sym_o_manufacturing",Head:"sym_o_print",Fluid:"water_drop",Encoder:"straighten"};return se(()=>{n()}),(u,s)=>(p(),_(be,{label:"Select board to monitor",options:i.value.filter(t=>t.DeviceTypeStr!=="Main"),modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=t=>o.value=t),disable:d.value,"map-options":"","use-chips":"",dense:"",multiple:""},{option:l(t=>[a(N,ie(de(t.itemProps)),{default:l(()=>[a(b,{avatar:""},{default:l(()=>[a(A,{name:m[t.opt.DeviceTypeStr]},null,8,["name"])]),_:2},1024),a(b,null,{default:l(()=>[a(T,null,{default:l(()=>[z(V(t.opt.Id||`${t.opt.DeviceTypeStr} ${t.opt.DeviceNo+1}`),1)]),_:2},1024),a(T,{caption:""},{default:l(()=>[z(V(t.opt.IpAddr),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),prepend:l(()=>[a(A,{name:"sym_o_developer_board"})]),after:l(()=>[a(Q,{label:"Refresh list",color:"primary",push:"",rounded:"",icon:"sym_o_sync",disable:d.value,onClick:ue(n,["stop"])},null,8,["disable"])]),"selected-item":l(t=>[a(ye,{removable:"",onRemove:r=>t.removeAtIndex(t.index),tabindex:t.tabindex,color:t.opt.color,"text-color":"black",class:"q-ma-xs",size:"sm"},{default:l(()=>[z(V(t.opt.Id||`${t.opt.DeviceTypeStr} ${t.opt.DeviceNo+1}`),1)]),_:2},1032,["onRemove","tabindex","color"])]),_:1},8,["options","modelValue","disable"]))}}),De=B({__name:"BoardComponent",setup(e){const o=f([]);return(i,d)=>{const n=qe,m=ke;return p(),_(me,null,{default:l(()=>[a(O,null,{default:l(()=>[a(n,{boards:o.value,"onUpdate:boards":d[0]||(d[0]=u=>o.value=u)},null,8,["boards"])]),_:1}),o.value.length>0?(p(),_(O,{key:0},{default:l(()=>[a(m,{boards:o.value},null,8,["boards"])]),_:1})):U("",!0)]),_:1})}}}),ze={class:"markdown-body"},He="DPU Boards live visualization",Xe="Display the live data from encoder, stepper, cluster or fluid board (like in Putty, but not blinking)",Ye="developer_board",Ze=["mmd","machine","plc","automation","data","visualization"],Je={__name:"MvtBoardLive",setup(e,{expose:o}){return o({frontmatter:{title:"DPU Boards live visualization",description:"Display the live data from encoder, stepper, cluster or fluid board (like in Putty, but not blinking)",icon:"developer_board",tags:["mmd","machine","plc","automation","data","visualization"]}}),(d,n)=>{const m=De;return p(),g("div",ze,[n[0]||(n[0]=k("h1",{id:"pre-requirement",tabindex:"-1"},"Pre-requirement",-1)),n[1]||(n[1]=k("ol",null,[k("li",null,"Install and run the proxy")],-1)),a(m)])}}};export{Je as default,Xe as description,Ye as icon,Ze as tags,He as title};
